# Free Deployment Options for RRC Water Safety App

## Overview

Your app is a lightweight Docker-based Flask application that:
- Makes periodic API calls to external sources
- Uses in-memory caching (15-minute cycles)
- Requires continuous uptime (not ideal for serverless)
- Has minimal resource requirements

## Best Free Options

### ü•á Option 1: Render.com (RECOMMENDED)

**Best choice for Docker apps with free tier**

**Pros:**
‚úÖ Native Docker support (uses your Dockerfile directly)
‚úÖ Free tier includes 750 hours/month (enough for 24/7)
‚úÖ Automatic HTTPS with custom domains
‚úÖ Easy deployment from GitHub
‚úÖ Built-in logging and monitoring
‚úÖ Decent performance
‚úÖ No credit card required for free tier

**Cons:**
‚ö†Ô∏è Free tier spins down after 15 minutes of inactivity (cold start)
‚ö†Ô∏è Limited to 512MB RAM (sufficient for your app)

**Steps to Deploy:**
1. Push code to GitHub
2. Sign up at https://render.com
3. Create new "Web Service"
4. Connect your GitHub repository
5. Render auto-detects Dockerfile
6. Deploy!

**Configuration:**
```yaml
# render.yaml (optional - for infrastructure as code)
services:
  - type: web
    name: rrc-water-safety
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    envVars:
      - key: DEMO_MODE
        value: false
```

**Cold Start Issue:** 
- Free tier sleeps after 15 min inactivity
- First request after sleep takes 30-60 seconds
- Solution: Use a free uptime monitor (see below) to ping every 14 minutes

**Cost:** FREE (forever)

---

### ü•à Option 2: Fly.io

**Great for Docker, generous free tier**

**Pros:**
‚úÖ Excellent Docker support
‚úÖ 3 shared-cpu-1x VMs free (256MB RAM each)
‚úÖ 160GB outbound transfer/month
‚úÖ Doesn't sleep/spin down
‚úÖ Multiple regions available
‚úÖ Good performance

**Cons:**
‚ö†Ô∏è Requires credit card (for verification, not charged)
‚ö†Ô∏è More complex setup than Render

**Steps to Deploy:**
1. Install flyctl: `curl -L https://fly.io/install.sh | sh` (Linux/Mac) or download from website (Windows)
2. Sign up: `flyctl auth signup`
3. Launch app: `flyctl launch` (in project directory)
4. Deploy: `flyctl deploy`

**Configuration:**
```toml
# fly.toml (auto-generated by flyctl launch)
app = "rrc-water-safety"

[build]
  dockerfile = "Dockerfile"

[env]
  DEMO_MODE = "false"

[[services]]
  internal_port = 5000
  protocol = "tcp"

  [[services.ports]]
    handlers = ["http"]
    port = 80

  [[services.ports]]
    handlers = ["tls", "http"]
    port = 443
```

**Cost:** FREE within limits (your app easily fits)

---

### ü•â Option 3: Railway.app

**Modern platform with Docker support**

**Pros:**
‚úÖ Simple Docker deployment
‚úÖ $5 free credit/month (enough for 24/7 uptime)
‚úÖ No spin down/cold starts
‚úÖ Good developer experience
‚úÖ Automatic HTTPS

**Cons:**
‚ö†Ô∏è Requires credit card
‚ö†Ô∏è Free credit runs out after ~500 hours/month on free tier
‚ö†Ô∏è Limited free tier compared to others

**Steps to Deploy:**
1. Sign up at https://railway.app
2. Create new project
3. Connect GitHub repository
4. Railway auto-detects Dockerfile
5. Deploy!

**Cost:** FREE up to $5/month usage

---

### Option 4: Google Cloud Run

**Serverless containers with generous free tier**

**Pros:**
‚úÖ 2 million requests/month free
‚úÖ 360,000 GB-seconds free
‚úÖ Docker-native
‚úÖ Scales to zero (saves resources)
‚úÖ Professional infrastructure

**Cons:**
‚ö†Ô∏è Requires credit card (Google account)
‚ö†Ô∏è Scales to zero = cold starts (bad for cache)
‚ö†Ô∏è More complex setup
‚ö†Ô∏è May not be ideal due to caching requirements

**Not Recommended** for this app due to cache invalidation when scaling to zero.

---

### Option 5: Oracle Cloud Always Free Tier

**Most generous free tier**

**Pros:**
‚úÖ Always free (not trial)
‚úÖ 2 ARM-based VMs (1/8 OCPU, 1GB RAM each)
‚úÖ Or 2 AMD-based VMs (1/8 OCPU, 1GB RAM each)  
‚úÖ 10TB outbound transfer/month
‚úÖ No time limits
‚úÖ Full VM control

**Cons:**
‚ö†Ô∏è Requires credit card
‚ö†Ô∏è Manual Docker setup (no automatic deployment)
‚ö†Ô∏è More sys-admin work
‚ö†Ô∏è Complex networking setup

**Steps:**
1. Sign up at https://cloud.oracle.com
2. Create free tier VM (Ubuntu)
3. SSH in and install Docker
4. Clone repo and run docker-compose
5. Configure firewall/networking

**Best if:** You want full control and don't mind manual setup

---

### Option 6: Replit

**Quick and easy deployment**

**Pros:**
‚úÖ No credit card required
‚úÖ Very easy setup
‚úÖ Built-in IDE
‚úÖ Instant deployment

**Cons:**
‚ö†Ô∏è Free tier sleeps aggressively (after 1 hour inactivity)
‚ö†Ô∏è Limited resources
‚ö†Ô∏è Not ideal for Docker (better for native Python)
‚ö†Ô∏è Public code (unless paid plan)

**Not Recommended** unless you want quick demo/testing

---

## Recommended Approach: Render.com + Uptime Monitor

### Best Free Setup

**Step 1: Deploy to Render.com**
- Easiest deployment from your Docker setup
- Free HTTPS automatically
- Good performance

**Step 2: Prevent Cold Starts (Free Options)**

Use a free uptime monitor to ping your app every 14 minutes:

#### Option A: UptimeRobot
- https://uptimerobot.com
- Free tier: 50 monitors
- 5-minute check intervals (upgrade to 1-minute for $7/mo)
- Setup: Add HTTP monitor for your Render URL

#### Option B: Cron-job.org  
- https://cron-job.org
- Free tier: unlimited jobs
- 1-minute intervals
- Setup: Create job to hit your `/` endpoint

#### Option C: Better Uptime (by Betterstack)
- https://betteruptime.com
- Free tier: 10 monitors
- 30-second intervals
- Setup: Add HTTP monitor

**Configuration Example (UptimeRobot):**
```
Monitor Type: HTTP(s)
URL: https://your-app.onrender.com/api/conditions
Monitoring Interval: 5 minutes
Alert When Down: Yes (optional - get email if down)
```

This keeps your Render app "warm" and prevents the 15-minute timeout.

---

## Deployment Preparation

### Before Deploying Anywhere:

1. **Set DEMO_MODE to false:**
   ```yaml
   environment:
     - DEMO_MODE=false
   ```

2. **Update docker-compose.yml (for platforms that use it):**
   ```yaml
   version: '3.8'
   services:
     web:
       build: .
       ports:
         - "5000:5000"
       environment:
         - FLASK_ENV=production
         - DEMO_MODE=false
       restart: always
   ```

3. **Ensure Dockerfile is production-ready:**
   Already configured correctly ‚úÖ

4. **Test locally first:**
   ```bash
   docker-compose down
   docker-compose up --build
   # Test at http://localhost:5000
   ```

---

## Quick Comparison Table

| Platform | Free Tier | Cold Starts | Docker | Setup Difficulty | Credit Card |
|----------|-----------|-------------|--------|------------------|-------------|
| **Render.com** | 750h/mo | Yes (15min) | ‚úÖ | Easy | No |
| **Fly.io** | 3 VMs | No | ‚úÖ | Medium | Yes |
| **Railway** | $5/mo | No | ‚úÖ | Easy | Yes |
| **Oracle** | Always free | No | ‚úÖ | Hard | Yes |
| **Replit** | Limited | Yes (1hr) | ‚ö†Ô∏è | Very Easy | No |
| **Cloud Run** | 2M req/mo | Yes | ‚úÖ | Medium | Yes |

---

## My Recommendation

### For You Specifically:

**üéØ Go with Render.com + UptimeRobot**

**Why:**
1. ‚úÖ **Zero cost** (no credit card needed)
2. ‚úÖ **Easiest setup** (5 minutes to deploy)
3. ‚úÖ **Works with your Dockerfile** (no changes needed)
4. ‚úÖ **Automatic HTTPS** (professional appearance)
5. ‚úÖ **GitHub integration** (push to deploy)
6. ‚úÖ **UptimeRobot prevents cold starts** (free tier is sufficient)

**Alternative if you want no cold starts at all:**
- **Fly.io** - Requires credit card but doesn't sleep

---

## Step-by-Step: Deploy to Render.com

### 1. Prepare Your Repository

**Option A: Push to GitHub** (Recommended)
```bash
# If not already a git repo
git init
git add .
git commit -m "Initial commit"

# Create repo on GitHub, then:
git remote add origin https://github.com/yourusername/rrc-water-safety.git
git branch -M main
git push -u origin main
```

**Option B: Connect existing GitHub repo**
- Your code is already in a git repo, just ensure it's pushed to GitHub

### 2. Sign Up for Render.com

1. Go to https://render.com
2. Click "Get Started for Free"
3. Sign up with GitHub (easiest - auto-links repos)

### 3. Create Web Service

1. Click "New +" ‚Üí "Web Service"
2. Connect your GitHub repository
3. Render will auto-detect:
   - ‚úÖ Dockerfile
   - ‚úÖ Port 5000
4. Configure:
   - **Name:** `rrc-water-safety`
   - **Region:** Choose closest to UK
   - **Branch:** `main`
   - **Environment:** `Docker`
   - **Plan:** `Free`
5. Add Environment Variable:
   - **Key:** `DEMO_MODE`
   - **Value:** `false`
6. Click "Create Web Service"

### 4. Wait for Deployment

- Initial build: 2-5 minutes
- Watch logs in real-time
- Once deployed, you'll get a URL like: `https://rrc-water-safety-xxxx.onrender.com`

### 5. Set Up Uptime Monitor

1. Sign up at https://uptimerobot.com
2. Add new monitor:
   - **Monitor Type:** HTTP(s)
   - **Friendly Name:** RRC Water Safety
   - **URL:** `https://rrc-water-safety-xxxx.onrender.com/api/conditions`
   - **Monitoring Interval:** 5 minutes
3. Save

### 6. Test Your Deployment

```bash
# Test API
curl https://rrc-water-safety-xxxx.onrender.com/api/conditions

# Open in browser
start https://rrc-water-safety-xxxx.onrender.com
```

### 7. (Optional) Custom Domain

Render free tier supports custom domains:
1. Buy domain (¬£2-10/year from Namecheap, etc.)
2. In Render dashboard: Settings ‚Üí Custom Domain
3. Add CNAME record in your DNS:
   ```
   CNAME rrc.yourclub.com ‚Üí rrc-water-safety-xxxx.onrender.com
   ```
4. Automatic HTTPS included!

---

## Monitoring & Maintenance

### View Logs
```
Render Dashboard ‚Üí Your Service ‚Üí Logs
```

### View Metrics
```
Render Dashboard ‚Üí Your Service ‚Üí Metrics
(CPU, Memory, Request volume)
```

### Redeploy
```
# Any push to GitHub main branch auto-deploys
git push origin main

# Or manual deploy in Render dashboard
```

### Troubleshooting
```
# If app crashes, check logs
# Common issues:
- External APIs not reachable (check logs for HTTP errors)
- Memory exceeded (unlikely with 512MB)
- Build failures (check Dockerfile syntax)
```

---

## Cost Projections

### Render.com (Free Forever)
```
Monthly Cost: $0
Limitations: 
- Cold starts after 15min inactivity
- 512MB RAM limit
- 750 hours/month
```

### Fly.io (Free within limits)
```
Monthly Cost: $0 (if under limits)
Included:
- 3 shared-cpu-1x VMs (256MB each)
- 160GB bandwidth
- Your app uses: <1GB/month bandwidth
```

### If You Outgrow Free Tiers:

**Render.com Starter:** $7/month
- No cold starts
- More resources

**Fly.io paid:** ~$2/month  
- Scale up resources

---

## Summary

‚úÖ **Deploy to Render.com** (5 minutes, zero cost, no card required)
‚úÖ **Use UptimeRobot** (prevents cold starts, free)
‚úÖ **Result:** Professional 24/7 deployment for **$0/month**

Your app will be live at a public URL, Reading Rowing Club members can access it from anywhere, and you pay nothing!

Would you like me to walk you through the Render.com deployment step-by-step right now?
